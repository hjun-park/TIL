# JSP 문답

### 1. HTTP를 사용하지 않고 다른 TCP/IP 프로토콜을 사용하여 통신한다면 이것은 웹일까?
1. HTTP를 사용하지 않고 다른 TCP/IP 프로토콜을 사용하여 통신한다면 이것은 웹이 아니다. 웹은 HTTP를 사용하여 통신한다.
2. HTTP는 웹에서 사용하는 표준 프로토콜이며 TCP/IP 프로토콜 위에서 동작한다.
3. HTTP를 대신하여 다른 프로토콜 사용하여 통신한다면 웹이 아닌 다른 인터넷 기반 응용 프로그램이다.
    - FTP는 파일을 전송하기 위한 프로토콜
    - SMTP는 이메일을 전송하기 위한 프로토콜
    - 이러한 프로토콜을 사용하여 인터넷 기반 서비스를 제공할 수 있지만 웹은 아니다.

<br />

### 2. 그럼 HTTP를 웹에서 왜 표준으로 왜쓸까?
1. `웹페이지 전송에 적합` : 브라우저-서버 간 전송되는 데이터 양이 적어서 빠른 전송 가능
2. `플랫폼 독립적` : 플랫폼에 독립적이라 OS나 HW에 상관없이 사용 가능
3. `캐시 기능` : 이전에 요청한 `resource`를 `client`측에 저장해 두어서 다음 요청시 웹 서버로부터 데이터 받지 않고도 캐싱된 데이터 사용 가능
4. `확장성` : 새로운 헤더필드나 메서드를 추가하여 확장 가능
5. `보안 기능` : HTTPS를 이용하여 SSL 혹은 TLS 프로토콜 사용하여 암호화, 인증 가능

<br />

### 3. <%-- 주석과 <!-- 주석의 차이는?
1. `<%--` 주석은 `JSP` 페이지 내에서 사용하는 주석이다.
    - JSP 코드 내, 서버 측에서 처리되는 주석이며 클라이언트에게 전송되지 않아 웹 브라우저에서 볼 수 없다.
2. `<!--` 주석은 `HTML` 페이지 내에서 사용하는 주석이다.
    - 브라우저에서 렌더링 되지 않으며 웹 페이지 소스코드에서 볼 수 있다.

<br />

### 4. JSP파일은 어떤 과정을 거쳐 브라우저에 나오는가?
![image](https://user-images.githubusercontent.com/70880695/229386192-f5f6ea31-cf9e-46e8-b836-9c9ded1e958a.png)
> 출처 : [de_sj_awa : JSP 처리 과정](https://velog.io/@jsj3282/JSP-%EC%B2%98%EB%A6%AC-%EA%B3%BC%EC%A0%95)

<br />

#### 4-1. JSP에 해당하는 서블릿이 존재하지 않을 경우 (1.1)
1. `[1.2]` JSP 페이지로부터 Java 코드 생성
2. `[1.3]` Java 코드 컴파일하여 `Servlet Class` 생성
3. `[2.1]` `Servlet`에 클라이언트 요청 전달
4. `[2.2]` 요청을 받은 `Servlet`이 처리한 결과를 응답으로 생성
5. `[3]` 응답을 웹 브라우저에 전송

<br />

#### 4-2. JSP에 해당하는 서블릿이 존재하는 경우 (이미 1.1 - 1.3 거친 경우)
1. `[2.1]` 서블릿에 client 요청 전달
2. `[2.2]` 요청을 받은 `Servlet`이 처리한 결과를 응답으로 생성
3. `[3]` 응답을 웹 브라우저에 전송

<br />

#### 4-3. 자세한 처리 과정
1. `Web browser`에서 JSP 파일 요청
2. 웹서버는 JSP 파일 처리하기 위해 JSP 컨테이너(ex: `Apache Tomcat`)에 요청 전달
3. JSP 컨테이너는 JSP 파일을 컴파일하여 `Servlet` 클래스로 생성
4. 생성된 `Servlet` 클래스는 컨테이너의 `Servlet Container`에서 실행
5. JSP 내의 Java 코드는 `Servlet` 클래스의 `_jspService()` 메서드 안에 삽입
6. JSP 내의 HTML 코드는 `Servlet` 클래스의 `_jspService()` 메서드 안에 문자열로 변환되어 삽입
7. `Servlet` 컨테이너는 `Servlet` 클래스 실행하여 동적으로 생성된 HTML 생성
8. 생성된 HTML은 `Web browser`에 전송되어 렌더링

#### 요약하자면 JSP파일은 `Servlet`을 변환되어 실행되며,
#### HTML 코드는 문자열로 변환되어 삽입되고, Java 코드는 `_jspService()` 메서드 안에 삽입된다.
#### 이후 브라우저에게 전달하여 동적인 웹 페이지 생성이 가능하다.

<br />

### 6. JSP는 출력버퍼를 사용하는데, 이 장점이 네트워크 성능 향상이다. 그 이유는 ?
- 출력 버퍼 사용 시 데이터 출력 시마다 바로 전송하는 것이 아닌 버퍼에 모아둔 후 일괄 전송 가능
1. `네트워크 전송 횟수 감소` : 출력 버퍼에 모아서 전송하기 때문에 전송 횟수가 줄어든다.
    - 네트워크 대역폭 절약 / 네트워크 지연시간 감소 ==> 전체적인 성능 향상
2. `작업 처리 효율성 향상` : 네트워크 전송 시 소켓 연결하는 데 오버헤드 발생
    - 버퍼를 이용하면 이를 줄일 수 있으며 전체적으로 네트워크 성능 향상
3. `안정성 향상` : 네트워크 전송 시 데이터 손실 발생 가능
    - 버퍼를 이용하면 손실 시 전체를 재전송할 필요가 없어서 안정성 향상
    
### 7. 쿠키는 디스크에 저장 ? 메모리에 저장 ?
- 이전엔 디스크, 현재는 세션 종료 시에만 하드디스크에 저장
- 대부분은 메모리에 저장된다.

### 8. Persistent Cookie vs Session Cookie
1. `Persistent Cookie` : 만료일이 설정되어 있는 쿠키
    - 만료일이 지나면 쿠키가 삭제되며, 만료일이 없으면 브라우저가 종료되어도 유지
    - 사용자 로그인 정보 저장에 사용되어, 사용자 재방문 시 웹 사이트는 `Persistent` 쿠키 읽어서 채워넣을 수 있다.
2. `Session Cookie` : 브라우저 종료 시 자동으로 삭제되는 쿠키
   - 세션 ID와 같이 일시적인 정보 저장에 사용
   - 브라우저 종료 시 자동으로 삭제되기 때문에, 보안성이 높고 일시적인 정보만 저장 시에 적합하다.

### 9. 클라이언트가 서버에 요청을 보낼 때 쿠키는 왜 자동으로 딸려갈까?
1. HTTP는 stateless 프로토콜이다.
    - 상태를 저장하지 않기 때문에 쿠키를 사용하여 지속적인 연결을 유지한다.
2. 따라서, 쿠키는 클라이언트와 서버 간의 지속적인 연결을 유지하고, 상태 정보를 유지하기 위해 자동으로 요청과 응답에 추가된다.
3. 이를 통해 로그인 정보 입력하여 인증을 마치면 자동으로 인식되어 불편함 없이 웹 사용이 가능하다.

