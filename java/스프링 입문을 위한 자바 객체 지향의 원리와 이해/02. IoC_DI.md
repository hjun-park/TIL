# 02. IoC & DI

`IoC` : Inversion of Control (ì œì–´ì˜ ì—­ì „)
`DI` : Dependency Injection (ì˜ì¡´ì„± ì£¼ì…)

<br />

## 1. IOC(Inversion of Control)ë€?

- `IoC`ëŠ” `ì œì–´ì˜ ì—­ì „`ì´ë¼ëŠ” ëœ»ìœ¼ë¡œ, `ê°ì²´ì˜ ìƒì„±ë¶€í„° ìƒëª…ì£¼ê¸°ì˜ ê´€ë¦¬ê¹Œì§€ ëª¨ë“  ê°ì²´ì— ëŒ€í•œ ì œì–´ê¶Œì´ ë°”ë€Œì—ˆë‹¤`ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

### 1-1. ì˜ì¡´ì„± ì£¼ì… X

```java
interface Tire {
	String getBrand();
}

public class KoreaTire implements Tire {
	@Override
	public String getBrand() {
		return "í•œêµ­ íƒ€ì´ì–´";
	}
}

public class AmericaTire implements Tire {
	@Override
	public String getBrand() {
		return "ë¯¸êµ­ íƒ€ì´ì–´";
	}
}

public class Car {
	Tire tire;

	// ì˜ì¡´ì„± ì£¼ì…ì„ `Compile Time`ì—ì„œ ì²˜ë¦¬í•´ ì¤˜ì•¼ í•œë‹¤.
	// `Runtime`ì—ì„œ ì²˜ë¦¬í•´ì£¼ì§€ ëª»í•œë‹¤. ê²°êµ­ ìœ ì—°ì„±ì´ ë–¨ì–´ì§„ë‹¤.
	public Car() {
		tire = new KoreaTire();
		// tire = new AmericaTire();
	}

	public String getTireBrand() {
		return "ì¥ì°©ëœ íƒ€ì´ì–´: " + tire.getBrand();
	}
}
```

### 1-2. (ìŠ¤í”„ë§ X) ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…

```java
public class Main {
	public static void main(String[] args) {
		Tire tire = new KoreaTire();
		// ì™¸ë¶€ì—ì„œ ìƒì„±ëœ íƒ€ì´ì–´ë¥¼ ìë™ì°¨ì— ì¥ì°©í•¨ (ì£¼ì…)
		Car car = new Car(tire);
	}
}
```

- ê¸°ì¡´ ë°©ì‹ì€ `Car`ì—ì„œ `KoreaTire` `AmericaTire`ì— ëŒ€í•´ ì •í™•íˆ ì•Œì•„ì•¼ ê°ì²´ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- ë°˜ë©´ì— ìœ„ ë°©ì‹ì€ `Tire` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¼ë©´ ì–´ë–¤ ê²ƒì´ë“ ì§€ ì£¼ì…í•  ìˆ˜ ìˆë‹¤.
- ë‚˜ì¤‘ì— ë¯¸êµ­, í•œêµ­ íƒ€ì´ì–´ ë§ê³ ë„ ë‹¤ë¥¸ íƒ€ì´ì–´ê°€ ìƒê¸°ë”ë¼ê³  ìœ ì—°í•˜ê²Œ ëŒ€ì²˜ ê°€ëŠ¥í•˜ë‹¤.
- ì¦‰, `ì¸í„°í˜ì´ìŠ¤`ë¥¼ êµ¬í˜„í•œë‹¤ëŠ” ê²ƒì€ `í˜„ì‹¤ ì„¸ê³„ì—ì„œì˜ íƒ€ì´ì–´ í‘œì¤€ ê·œê²©`ì„ ì¤€ìˆ˜í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

<br />

### 1-3. (ìŠ¤í”„ë§ X) ì†ì„±ë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…

```java
public class Main {
	public static void main(String[] args) {
		Tire tire = new KoreaTire();
		Car car = new Car();
		car.setTire(tire);
	}
}
```

- `setter`ë¥¼ ì´ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ë°©ë²•
- í˜„ì‹¤ ì„¸ê³„ì—ì„œëŠ” ì¤‘ê°„ì— ì˜ì¡´ì„± êµì²´ê°€ ìˆê² ì§€ë§Œ, ìŠ¤í”„ë§ ì„¸ê³„ëŠ” ëŒ€ì²´ë¡œ ì£¼ì…ë˜ë©´ ê³„ì† ì‚¬ìš©í•œë‹¤.

<br />

### 1-4. (ìŠ¤í”„ë§ O) XML íŒŒì¼ ì‚¬ìš©

```java
public class Main {
	public static void main(String[] args) {
		// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
		ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml", Driver.class);
		// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¡œë¶€í„° í•„ìš”í•œ ê°ì²´ë¥¼ ìš”ì²­ (lookup)
		Tire tire = (Tire)context.getBean("tire");
		Car car = (Car)context.getBean("car");
		car.setTire(tire);

		System.out.println("car.getTireBrand() = " + car.getTireBrand());
	}
}
```

<br />

#### ğŸ”µ (258page ê·¸ë¦¼ì°¸ê³ ) ì‚¬ì‹¤ êµ¬ì¡°ëŠ” ë³„ í° ì°¨ì´ê°€ ì—†ëŠ”ë° ì˜¤íˆë ¤ ì™œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¥¼ ë„ì…í•˜ëŠ”ê°€ ?

- ì¬ì»´íŒŒì¼/ì¬ë°°í¬ ì—†ì´ë„ XML íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ë‹¤ë¥¸ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ì—¬ ë³€ê²½ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
- ì¦‰, ìœ„ì˜ íƒ€ì´ì–´ë¥¼ ë‹¤ë¥¸ ë¸Œëœë“œì˜ íƒ€ì´ì–´ë¡œ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´, XML íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

<br />

### 1-5. (ìŠ¤í”„ë§ O) `@Autowired`ë¥¼ í†µí•œ ì†ì„± ì£¼ì…

- `@Autowired`ëŠ” ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ì„ ë³´ê³  ì•Œì•„ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•œë‹¤.

```java
public class Car {
	@Autowired
	Tire tire;

	public String getTireBrand() {
		return "ì¥ì°©ëœ íƒ€ì´ì–´: " + tire.getBrand();
	}
}
```

<br />

#### ğŸ”µ `@Autowired`ëŠ” ì–´ë–»ê²Œ `bean`ì„ ì°¾ëŠ”ê°€ ?

![Untitled](https://user-images.githubusercontent.com/70880695/235287535-0dc14647-81f0-4234-b699-8d8036fa4838.jpg)

<br />

### 1-6. (ìŠ¤í”„ë§ O) `@Resource`ë¥¼ í†µí•œ ì†ì„± ì£¼ì…

- `@Resource`ëŠ” `@Autowired`ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, `@Autowired`ëŠ” íƒ€ì…ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ì§€ë§Œ, `@Resource`ëŠ” ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•œë‹¤.

```java
public class Car {
	@Resource(name = "tire")
	Tire tire;

	public String getTireBrand() {
		return "ì¥ì°©ëœ íƒ€ì´ì–´: " + tire.getBrand();
	}
}
```

#### ğŸ”µ `@Resource` vs `@Autowired`

- `@Resource`ëŠ” ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•œë‹¤.
- `@Autowired`ëŠ” íƒ€ì…ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•œë‹¤.



