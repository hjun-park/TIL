> 내용 참고 : [Real MySQL 8.0 (1권)](https://www.yes24.com/Product/Goods/103415627)

# 04. 옵티마이저

# 1. 옵티마이저
- DB 서버에서 두뇌와 같은 역할 담당

## 1-1. 쿼리 실행 절차
1. `[Parse Tree 생성]` 요청된 SQL 쪼개서 MySQL 서버가 이해할 수 있는 수준으로 분리 - `SQL 파서 이용`
2. `[실행 계획 생성]` Parse Tree 확인 하면서 어떤 테이블부터 읽고 어떤 인덱스 사용할 지 선택 - `최적화 및 실행 계획 수립 단계`
   - 불필요 조건 제거 및 연산 단순화
   - 여러 테이블 조인 시 순서 결정
   - 통계 정보 이용하여 사용할 인덱스 결정
   - 가져온 레코드 임시 테이블에 넣고 다시 한 번 가공해야 하는지 결정
3. `[데이터 조회]` 두 번째에서 결정된 읽기 순서와 인덱스 이용하여 `스토리지 엔진`으로부터 데이터 가져옴

<br />

## 1-2. 옵티마이저 종류

### 1) CBO(Cost-based optimizer) - 비용 기반 최적화
- 각 작업의 비용 정보, 대상 테이블의 예측된 통계 정보를 이용하여 계획별 비용 산출
- 산출된 여러 개 실행 방법들 중 최소 비용 처리방식 선택

<br />

### 2) RBO(Rule-based optimizer) - 규칙 기반 최적화
- 레코드 건수나 선택도 고려하지 않고 `옵티마이저`에 내장된 `우선순위`에 따라 실행 계획 수립하는 방식
- 거의 항상 같은 실행 계획을 만들어내며 잘 사용하지 않음
